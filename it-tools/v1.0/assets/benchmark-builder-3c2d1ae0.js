import{d as M,o as w,e as b,f as h,a8 as S,m as z,bt as E,ba as F,F as U,r as A,h as t,g as n,bu as I,w as p,k as x,aU as P,a9 as L,n as R,bb as W,C as T,b as q,v as D,y as G,z as H,L as J,c as Q,N as X,x as Y}from"./index-2e588a01.js";import{_ as Z}from"./InputNumber-3af733bc.js";import{_ as tt}from"./Scrollbar-23aba636.js";import{_ as et}from"./Divider-1b71e9b4.js";import{_ as nt}from"./FormItem-60cf44aa.js";import"./use-locale-02253be4.js";import"./use-form-item-6311a236.js";import"./Button-cd011781.js";import"./Remove-f3c3b67b.js";const ot={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},at=h("g",{fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[h("path",{d:"M12 5v14"}),h("path",{d:"M5 12h14"})],-1),st=[at],K=M({name:"Plus",render:function(a,l){return w(),b("svg",ot,st)}}),lt={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},rt=S('<g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 7h16"></path><path d="M10 11v6"></path><path d="M14 11v6"></path><path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2l1-12"></path><path d="M9 7V4a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3"></path></g>',1),ct=[rt],O=M({name:"Trash",render:function(a,l){return w(),b("svg",lt,ct)}});function N({data:o}){return o.length===0?0:z.sum(o)/o.length}function it({data:o}){const a=N({data:o}),l=o.map(_=>(_-a)**2);return N({data:l})}function ut({data:o,headerMap:a={}}){if(!Array.isArray(o)||o.length===0)return"";const l=Object.keys(o[0]),_=o.map(d=>Object.values(d)),f=`| ${l.map(d=>a[d]??d).join(" | ")} |`,c=`| ${l.map(()=>"---").join(" | ")} |`,$=_.map(d=>`| ${d.join(" | ")} |`).join(`
`);return`${f}
${c}
${$}`}const pt=M({__name:"dynamic-values",props:{values:{}},emits:["update:values"],setup(o,{emit:a}){const l=o,_=a,f=E(),c=F(l,"values",_);async function $(){c.value.push(null),await P(),f.value.at(-1)?.focus()}function d(y){if(y===c.value.length-1){$();return}f.value.at(y+1)?.focus()}return(y,s)=>{const e=L,r=R,k=W;return w(),b("div",null,[(w(!0),b(U,null,A(n(c),(g,v)=>(w(),b("div",{key:v,"mb-2":"",flex:"","flex-nowrap":"","gap-2":""},[t(n(Z),{ref_for:!0,ref:n(f).set,value:n(c)[v],"onUpdate:value":i=>n(c)[v]=i,"show-button":!1,placeholder:"设定度量值...",autofocus:"",onKeydown:I(i=>d(v),["enter"])},null,8,["value","onUpdate:value","onKeydown"]),t(k,{tooltip:"删除度量值"},{default:p(()=>[t(r,{circle:"",variant:"text",onClick:i=>n(c).splice(v,1)},{default:p(()=>[t(e,{component:n(O),depth:"3",size:"18"},null,8,["component"])]),_:2},1032,["onClick"])]),_:2},1024)]))),128)),t(r,{onClick:$},{default:p(()=>[t(e,{component:n(K),depth:"3","mr-2":"",size:"18"},null,8,["component"]),x(" 添加度量值 ")]),_:1})])}}}),_t={"mb-5":"",flex:"","flex-1":"","flex-nowrap":"","justify-center":"","gap-12px":""},dt={flex:"","justify-center":""},mt={style:{flex:"0 0 100%"}},ft={style:{"max-width":"600px",margin:"0 auto"}},vt={"mx-auto":"","max-w-sm":"",flex:"","justify-center":"","gap-3":""},ht={"mt-5":"",flex:"","justify-center":"","gap-3":""},jt=M({__name:"benchmark-builder",setup(o){const a=T("benchmark-builder:suites",[{title:"套房 1",data:[5,10]},{title:"套房 2",data:[8,12]}]),l=T("benchmark-builder:unit",""),_=s=>Math.round(s*1e3)/1e3,f=q(()=>a.value.map(({data:s,title:e})=>{const r=s.filter(z.isNumber);return{title:e,size:r.length,mean:N({data:r}),variance:it({data:r})}}).sort((s,e)=>s.mean-e.mean).map(({mean:s,variance:e,size:r,title:k},g,v)=>{const i=l.value.trim(),m=v[0].mean,j=s-m,V=m===0?"∞":_(s/m),u=g!==0&&m!==s?` (+${_(j)}${i} ; x${V})`:"";return{position:g+1,title:k,mean:`${_(s)}${i}${u}`,variance:`${_(e)}${i}${i?"²":""}`,size:r}})),{copy:c}=D({createToast:!1}),$={position:"位置",title:"套房",size:"样品",mean:"平均",variance:"方差"};function d(){c(ut({data:f.value,headerMap:$}))}function y(){const s=f.value.flatMap(({title:e,...r})=>[` - ${e}`,...Object.entries(r).map(([k,g])=>`    - ${$[k]??k}: ${g}`)]).join(`
`);c(s)}return(s,e)=>{const r=H,k=et,g=nt,v=Y,i=L,m=R,j=tt,V=J;return w(),b(U,null,[t(j,{style:{flex:"1"},"x-scrollable":""},{default:p(()=>[h("div",_t,[(w(!0),b(U,null,A(n(a),(u,B)=>(w(),b("div",{key:B},[t(v,{style:{width:"294px"}},{default:p(()=>[t(r,{value:u.title,"onUpdate:value":C=>u.title=C,"label-position":"left",label:"套房名称",placeholder:"套房名称...",clearable:""},null,8,["value","onUpdate:value"]),t(k),t(g,{label:"套房价值","show-feedback":!1},{default:p(()=>[t(pt,{values:u.data,"onUpdate:values":C=>u.data=C},null,8,["values","onUpdate:values"])]),_:2},1024)]),_:2},1024),h("div",dt,[n(a).length>1?(w(),Q(m,{key:0,variant:"text",onClick:C=>n(a).splice(B,1)},{default:p(()=>[t(i,{component:n(O),depth:"3","mr-2":"",size:"18"},null,8,["component"]),x(" 删除套房 ")]),_:2},1032,["onClick"])):X("",!0),t(m,{variant:"text",onClick:C=>n(a).splice(B+1,0,{data:[0],title:`Suite ${n(a).length+1}`})},{default:p(()=>[t(i,{component:n(K),depth:"3","mr-2":"",size:"18"},null,8,["component"]),x(" 添加套房 ")]),_:2},1032,["onClick"])])]))),128))])]),_:1}),h("div",mt,[h("div",ft,[h("div",vt,[t(r,{value:n(l),"onUpdate:value":e[0]||(e[0]=u=>G(l)?l.value=u:null),placeholder:"单位（例如：毫秒）",label:"单位","label-position":"left","mb-4":""},null,8,["value"]),t(m,{onClick:e[1]||(e[1]=u=>a.value=[{title:"套房 1",data:[]},{title:"套房 2",data:[]}])},{default:p(()=>[x(" 重置套房 ")]),_:1})]),t(V,{data:n(f),headers:$},null,8,["data"]),h("div",ht,[t(m,{onClick:e[2]||(e[2]=u=>d())},{default:p(()=>[x(" 复制为Markdown表格 ")]),_:1}),t(m,{onClick:e[3]||(e[3]=u=>y())},{default:p(()=>[x(" 复制为项目符号列表 ")]),_:1})])])])],64)}}});export{jt as default};
