import{d as v,o as g,e as p,f as l,b9 as y,C as E,b as V,h as w,g as m,y as C,w as k,N,z as P,n as $,F as A,r as j,t as F,c as B,k as x,a9 as M}from"./index-2e588a01.js";import{w as z}from"./defaults-4d6daddf.js";import{i as S}from"./boolean-f2550a48.js";import{_ as R}from"./SpanCopyable.vue_vue_type_script_setup_true_lang-11dc0fa9.js";import{_ as D}from"./Table-a39030ba.js";const O={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},T=l("g",{fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[l("path",{d:"M5 12h14"}),l("path",{d:"M5 12l6 6"}),l("path",{d:"M5 12l6-6"})],-1),G=[T],U=v({name:"ArrowLeft",render:function(s,f){return g(),p("svg",O,G)}}),X={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},q=l("g",{fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[l("path",{d:"M5 12h14"}),l("path",{d:"M13 18l6-6"}),l("path",{d:"M13 6l6 6"})],-1),H=[q],J=v({name:"ArrowRight",render:function(s,f){return g(),p("svg",X,H)}});var I;(function(){var u,s,f,d,_,b,c,n;n=function(e){var t,i,o,r;return t=(e&255<<24)>>>24,i=(e&255<<16)>>>16,o=(e&65280)>>>8,r=e&255,[t,i,o,r].join(".")},c=function(e){var t,i,o,r,a,h;for(t=[],o=r=0;r<=3&&e.length!==0;o=++r){if(o>0){if(e[0]!==".")throw new Error("Invalid IP");e=e.substring(1)}h=s(e),a=h[0],i=h[1],e=e.substring(i),t.push(a)}if(e.length!==0)throw new Error("Invalid IP");switch(t.length){case 1:if(t[0]>4294967295)throw new Error("Invalid IP");return t[0]>>>0;case 2:if(t[0]>255||t[1]>16777215)throw new Error("Invalid IP");return(t[0]<<24|t[1])>>>0;case 3:if(t[0]>255||t[1]>255||t[2]>65535)throw new Error("Invalid IP");return(t[0]<<24|t[1]<<16|t[2])>>>0;case 4:if(t[0]>255||t[1]>255||t[2]>255||t[3]>255)throw new Error("Invalid IP");return(t[0]<<24|t[1]<<16|t[2]<<8|t[3])>>>0;default:throw new Error("Invalid IP")}},f=function(e){return e.charCodeAt(0)},d=f("0"),b=f("a"),_=f("A"),s=function(e){var t,i,o,r,a;for(r=0,t=10,i="9",o=0,e.length>1&&e[o]==="0"&&(e[o+1]==="x"||e[o+1]==="X"?(o+=2,t=16):"0"<=e[o+1]&&e[o+1]<="9"&&(o++,t=8,i="7")),a=o;o<e.length;){if("0"<=e[o]&&e[o]<=i)r=r*t+(f(e[o])-d)>>>0;else if(t===16)if("a"<=e[o]&&e[o]<="f")r=r*t+(10+f(e[o])-b)>>>0;else if("A"<=e[o]&&e[o]<="F")r=r*t+(10+f(e[o])-_)>>>0;else break;else break;if(r>4294967295)throw new Error("too large");o++}if(o===a)throw new Error("empty octet");return[r,o]},u=function(){function e(t,i){var o,r,a;if(typeof t!="string")throw new Error("Missing `net' parameter");if(i||(a=t.split("/",2),t=a[0],i=a[1]),i||(i=32),typeof i=="string"&&i.indexOf(".")>-1){try{this.maskLong=c(i)}catch{throw new Error("Invalid mask: "+i)}for(o=r=32;r>=0;o=--r)if(this.maskLong===4294967295<<32-o>>>0){this.bitmask=o;break}}else if(i||i===0)this.bitmask=parseInt(i,10),this.maskLong=0,this.bitmask>0&&(this.maskLong=4294967295<<32-this.bitmask>>>0);else throw new Error("Invalid mask: empty");try{this.netLong=(c(t)&this.maskLong)>>>0}catch{throw new Error("Invalid net address: "+t)}if(!(this.bitmask<=32))throw new Error("Invalid mask for ip4: "+i);this.size=Math.pow(2,32-this.bitmask),this.base=n(this.netLong),this.mask=n(this.maskLong),this.hostmask=n(~this.maskLong),this.first=this.bitmask<=30?n(this.netLong+1):this.base,this.last=this.bitmask<=30?n(this.netLong+this.size-2):n(this.netLong+this.size-1),this.broadcast=this.bitmask<=30?n(this.netLong+this.size-1):void 0}return e.prototype.contains=function(t){return typeof t=="string"&&(t.indexOf("/")>0||t.split(".").length!==4)&&(t=new e(t)),t instanceof e?this.contains(t.base)&&this.contains(t.broadcast||t.last):(c(t)&this.maskLong)>>>0===(this.netLong&this.maskLong)>>>0},e.prototype.next=function(t){return t==null&&(t=1),new e(n(this.netLong+this.size*t),this.mask)},e.prototype.forEach=function(t){var i,o,r;for(r=c(this.first),o=c(this.last),i=0;r<=o;)t(n(r),r,i),i++,r++},e.prototype.toString=function(){return this.base+"/"+this.bitmask},e}(),I=u}).call(y);function K({ip:u}){const[s]=u.split(".").map(Number);if(s<128)return"A";if(s>127&&s<192)return"B";if(s>191&&s<224)return"C";if(s>223&&s<240)return"D";if(s>239&&s<256)return"E"}const Q={key:0},W={"font-bold":""},Y={key:1,"op-70":""},Z={"mt-3":"",flex:"","items-center":"","justify-between":""},it=v({__name:"ipv4-subnet-calculator",setup(u){const s=E("ipv4-subnet-calculator:ip","192.168.0.1/24"),f=n=>new I(n.trim()),d=V(()=>z(()=>f(s.value),void 0)),_=[{message:"无法解析该地址，请检查格式",validator:n=>S(()=>f(n.trim()))}],b=[{label:"网络掩码",getValue:n=>n.toString()},{label:"网络地址",getValue:({base:n})=>n},{label:"子网掩码",getValue:({mask:n})=>n},{label:"子网掩码 二进制",getValue:({bitmask:n})=>("1".repeat(n)+"0".repeat(32-n)).match(/.{8}/g)?.join(".")??""},{label:"子网掩码 CIDR",getValue:({bitmask:n})=>`/${n}`},{label:"子网掩码 通配符",getValue:({hostmask:n})=>n},{label:"子网数量",getValue:({size:n})=>String(n)},{label:"起始地址",getValue:({first:n})=>n},{label:"结束地址",getValue:({last:n})=>n},{label:"广播地址",getValue:({broadcast:n})=>n,undefinedFallback:"没有广播地址"},{label:"IP等级",getValue:({base:n})=>K({ip:n}),undefinedFallback:"未知等级"}];function c({count:n=1}){const e=d.value?.next(n);e&&(s.value=e.toString())}return(n,e)=>{const t=P,i=D,o=M,r=$;return g(),p("div",null,[w(t,{value:m(s),"onUpdate:value":e[0]||(e[0]=a=>C(s)?s.value=a:null),label:"IPv4 地址（可带掩码，用/分割）",placeholder:"IPv4地址 (例：192.168.1.1 或 192.168.1.0/24)","validation-rules":_,"mb-4":""},null,8,["value"]),m(d)?(g(),p("div",Q,[w(i,null,{default:k(()=>[l("tbody",null,[(g(),p(A,null,j(b,({getValue:a,label:h,undefinedFallback:L})=>l("tr",{key:h},[l("td",W,F(h),1),l("td",null,[a(m(d))?(g(),B(R,{key:0,value:a(m(d))},null,8,["value"])):(g(),p("span",Y,F(L),1))])])),64))])]),_:1}),l("div",Z,[w(r,{onClick:e[1]||(e[1]=a=>c({count:-1}))},{default:k(()=>[w(o,{component:m(U)},null,8,["component"]),x(" 上一个网段 ")]),_:1}),w(r,{onClick:e[2]||(e[2]=a=>c({count:1}))},{default:k(()=>[x(" 下一个网段 "),w(o,{component:m(J)},null,8,["component"])]),_:1})])])):N("",!0)])}}});export{it as default};
