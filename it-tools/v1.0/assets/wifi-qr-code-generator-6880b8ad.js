import{p as i,V as U,y as b,R as s,d as N,c as k,w as P,x as B,o as $,f as W,h as p,g as u,N as F,e as H,k as M,a6 as V,z as q,n as D}from"./index-2e588a01.js";import{b as R}from"./browser-e933942f.js";import{u as T}from"./downloadBase64-dc1264e8.js";import{_ as z}from"./ColorPicker-9df889e5.js";import{_ as L}from"./FormItem-60cf44aa.js";import{_ as Q}from"./Form-1d745b99.js";import"./index-41b50b3c.js";import"./___vite-browser-external_commonjs-proxy-1436d598.js";import"./Button-cd011781.js";import"./use-locale-02253be4.js";import"./use-form-item-6311a236.js";import"./InputGroup-8e84cc88.js";function w(f){return f.replace(/([\\;,:"])/g,"\\$1")}function j(f){const{ssid:e,password:l,encryption:o,eapMethod:n,isHiddenSSID:m,eapAnonymous:r,eapIdentity:v,eapPhase2Method:c}=f;if(!e)return null;if(o==="nopass")return`WIFI:S:${w(e)};;`;if(o!=="WPA2-EAP"&&l)return`WIFI:S:${w(e)};T:${o};P:${w(l)};${m?"H:true":""};`;if(o==="WPA2-EAP"&&l&&n){if(!v&&!r||n==="PEAP"&&!c)return null;const g=r?"A:anon":`I:${w(v)}`,d=c!=="None"?`PH2:${c};`:"";return`WIFI:S:${w(e)};T:WPA2-EAP;P:${w(l)};E:${n};${d}${g};${m?"H:true":""};`}return null}function G({ssid:f,password:e,eapMethod:l,isHiddenSSID:o,eapAnonymous:n,eapIdentity:m,eapPhase2Method:r,color:{background:v,foreground:c},options:g}){const d=i(""),_=i("WPA");return U([f,e,_,l,o,n,m,r,v,c].filter(b),async()=>{const h=j({ssid:s(f),password:s(e),encryption:s(_),eapMethod:s(l),isHiddenSSID:s(o),eapAnonymous:s(n),eapIdentity:s(m),eapPhase2Method:s(r)});h&&(d.value=await R.toDataURL(s(h).trim(),{color:{dark:s(c),light:s(v),...g?.color},errorCorrectionLevel:"M",...g}))},{immediate:!0}),{qrcode:d,encryption:_}}const J={grid:"","grid-cols-1":"","gap-3":""},K={key:0},O={flex:"","flex-col":"","items-center":"","gap-3":""},X=["src"],ce=N({__name:"wifi-qr-code-generator",setup(f){const e=i("#000000ff"),l=i("#ffffffff"),o=i(),n=i(),m=i(),r=i(!1),v=i(!1),c=i(),g=i(),{qrcode:d,encryption:_}=G({ssid:o,password:n,eapMethod:m,isHiddenSSID:r,eapAnonymous:v,eapIdentity:c,eapPhase2Method:g,color:{background:l,foreground:e},options:{width:1024}}),{download:h}=T({source:d,filename:"WiFi二维码.png"});return(Y,t)=>{const x=V,A=q,y=z,I=L,C=Q,E=D,S=B;return $(),k(S,null,{default:P(()=>[W("div",J,[W("div",null,[p(x,{value:u(_),"onUpdate:value":t[0]||(t[0]=a=>b(_)?_.value=a:null),"mb-4":"",label:"加密方式:","default-value":"WPA","label-position":"left","label-width":"130px","label-align":"right",options:[{label:"无密码",value:"nopass"},{label:"WPA/WPA2",value:"WPA"},{label:"WEP",value:"WEP"}]},null,8,["value"]),p(A,{value:u(o),"onUpdate:value":t[1]||(t[1]=a=>b(o)?o.value=a:null),"label-position":"left","label-width":"130px","label-align":"right",label:"WiFi名称:",rows:"1",autosize:"",placeholder:"输入WiFi名称","mb-6":""},null,8,["value"]),p(x,{value:u(r),"onUpdate:value":t[2]||(t[2]=a=>b(r)?r.value=a:null),"mb-4":"",label:"是否隐藏:","default-value":!1,"label-position":"left","label-width":"130px","label-align":"right",options:[{label:"否",value:!1},{label:"是",value:!0}]},null,8,["value"]),u(_)!=="nopass"?($(),k(A,{key:0,value:u(n),"onUpdate:value":t[3]||(t[3]=a=>b(n)?n.value=a:null),"label-position":"left","label-width":"130px","label-align":"right",label:"WiFi密码:",rows:"1",autosize:"",type:"password",placeholder:"输入WiFi密码","mb-6":""},null,8,["value"])):F("",!0),p(C,{"label-width":"130","label-placement":"left"},{default:P(()=>[p(I,{label:"前景色:"},{default:P(()=>[p(y,{value:u(e),"onUpdate:value":t[4]||(t[4]=a=>b(e)?e.value=a:null),modes:["hex"]},null,8,["value"])]),_:1}),p(I,{label:"背景色:"},{default:P(()=>[p(y,{value:u(l),"onUpdate:value":t[5]||(t[5]=a=>b(l)?l.value=a:null),modes:["hex"]},null,8,["value"])]),_:1})]),_:1})]),u(d)?($(),H("div",K,[W("div",O,[W("img",{alt:"wifi-qrcode",src:u(d),width:"240"},null,8,X),p(E,{onClick:u(h)},{default:P(()=>[M(" 下载二维码 ")]),_:1},8,["onClick"])])])):F("",!0)])]),_:1})}}});export{ce as default};
